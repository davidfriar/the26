units:
  kx: cx
  ky: cy
  p: 2
  # Padded
  px: kx + 2p
  py: ky + 2p
points:
  key:
    width: kx
    height: ky
  zones:
    fingers:
      key:
        padding: 1ky
        spread: 1kx
      columns:
        ext:
          key:
            asym: clone
        pinky:
          key:
            stagger: ky*1/8
        ring:
          key:
            stagger: ky*4/8
        middle:
          key:
            stagger: ky*1/8
        index:
          key:
            stagger: -ky*2/8
        inner:
          key:
            stagger: -ky*2/8
      rows:
        bottom:
        top:
    thumbs:
      key:
        padding: 1kx # note that keys are rotated so switching x and y
        spread: 1ky
      anchor:
        ref: fingers_middle_bottom
        shift: [kx+0.5, -2ky]
      columns:
        inner:
          key:
            tags: large
            width: 1.5kx
            orient: 90
        outer:
          key:
            tags: large
            width: 1.5kx
            orient: 90
      rows:
        thumb:
  mirror: &mirror
    ref: fingers_inner_top
    distance: 2.5kx
outlines:
  keys:
    - what: rectangle
      where: -large
      size: [kx-0.5, ky-0.5]
    - what: rectangle
      where: large
      size: [1.5kx-0.5, ky-0.5]
  padded_keys:
    small:
      what: rectangle
      where: -large
      size: [px, px]
    large:
      what: rectangle
      where: large
      size: [1.5px + 2p, py]
  left_padded_keys:
    small:
      what: rectangle
      where: [[-large, /^(fingers|thumbs).*/]]
      size: [px, px]
    large:
      what: rectangle
      where: [[large, /^(fingers|thumbs).*/]]
      size: [1.5kx + 2p, py]
  right_padded_keys:
    small:
      what: rectangle
      where: [[-large, /^mirror.*/]]
      size: [px, px]
    large:
      what: rectangle
      where: [[large, /^mirror.*/]]
      size: [1.5kx + 2p, py]
  left_filler:
    - what: polygon
      points:
        - ref: fingers_middle_bottom
          shift: [-2.5kx - p, 0]
        - ref: fingers_middle_bottom
          shift: [2.5kx + p, 0]
        - ref: fingers_middle_bottom
          shift: [2.5kx + p, -2.75ky-p-1]
        - ref: fingers_middle_bottom
          shift: [-2.5kx - p, -2.75ky-p-1]
  right_filler:
    - what: polygon
      points:
        - ref: mirror_fingers_middle_bottom
          shift: [-3.5kx - p, 0]
        - ref: mirror_fingers_middle_bottom
          shift: [2.5kx + p, 0]
        - ref: mirror_fingers_middle_bottom
          shift: [2.5kx + p, -2.75ky-p-1]
        - ref: mirror_fingers_middle_bottom
          shift: [-3.5kx - p, -2.75ky-p-1]
  _right_board:
    keys:
      name: right_padded_keys
    filler:
      name: right_filler
  right_board:
    - name: _right_board
      fillet: 1
  _left_board:
    keys:
      name: left_padded_keys
    filler:
      name: left_filler
  left_board:
    - name: _left_board
      fillet: 1
  combo:
    - name: left_board
    - operation: stack
      name: right_board
    - operation: stack
      name: keys
  plateholes:
    - what: rectangle
      where: true
      bound: false
      size: [14, 14]
